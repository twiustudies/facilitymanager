{% extends "base.html" %}
{% block content %}
<h1>Wartungsberichte</h1>

<!-- Suchfeld fÃ¼r Live-Suche -->
<input type="text" id="searchInput" placeholder="Suche nach GebÃ¤ude, Wartungstyp oder Datum..." onkeyup="searchMaintenance()">

<!-- Druck-Button -->
<button onclick="window.print()" class="print-button">ðŸ“„ Drucken</button>

<!-- Wartungsberichtstabelle -->
<table id="maintenanceReport">
  <thead>
    <tr>
      <th>GebÃ¤ude</th>
      <th>Datum</th>
      <th>Auftrag</th>
    </tr>
  </thead>
  <tbody id="maintenanceList">
    {% for plan in maintenance_plans %}
    <tr class="maintenance-item">
      <td class="maintenance-data">{{ plan.building_id }}</td>
      <td class="maintenance-data">{{ plan.date }}</td>
      <td class="maintenance-data">{{ plan.description }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Nachricht, wenn keine Ergebnisse gefunden wurden -->
<p id="noResultsMessage" style="display: none;">Keine WartungseintrÃ¤ge gefunden.</p>

<script>
function searchMaintenance() {
    let input = document.getElementById("searchInput").value.toLowerCase();
    let items = document.querySelectorAll(".maintenance-item");
    let found = false;

    items.forEach(item => {
        let text = item.textContent.toLowerCase();
        if (text.includes(input)) {
            item.style.display = "table-row";
            found = true;
        } else {
            item.style.display = "none";
        }
    });

    document.getElementById("noResultsMessage").style.display = found ? "none" : "block";
}
</script>

<style>
  /* Druckfreundliches Design */
  @media print {
    body {
      font-family: Arial, sans-serif;
      background: white;
      color: black;
    }
    .print-button, #searchInput {
      display: none; /* Suchfeld & Druck-Button ausblenden */
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #f4f4f4;
    }
  }

  /* Standard Ansicht */
  .print-button {
    padding: 10px;
    background: #007bff;
    color: white;
    border: none;
    cursor: pointer;
    margin-bottom: 10px;
  }

  .print-button:hover {
    background: #0056b3;
  }

  #searchInput {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    font-size: 16px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }

  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
  }

  th {
    background-color: #f4f4f4;
  }
</style>

{% endblock %}
